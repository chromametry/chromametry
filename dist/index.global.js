"use strict";var Chromametry=(()=>{var P=Object.defineProperty;var ot=Object.getOwnPropertyDescriptor;var at=Object.getOwnPropertyNames;var st=Object.prototype.hasOwnProperty;var ct=(r,t)=>{for(var n in t)P(r,n,{get:t[n],enumerable:!0})},mt=(r,t,n,e)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of at(t))!st.call(r,o)&&o!==n&&P(r,o,{get:()=>t[o],enumerable:!(e=ot(t,o))||e.enumerable});return r};var ht=r=>mt(P({},"__esModule",{value:!0}),r);var dt={};ct(dt,{analyzeMonochromatic:()=>O,analyzeMonochromaticPalette:()=>xt,calcChromaSmoothness:()=>K,calcContrastEfficiency:()=>Q,calcDeltaE2000:()=>A,calcHueStability:()=>Z,calcLightnessLinearity:()=>W,calcScore:()=>I,calcSpacingUniformity:()=>J,calcStatistics:()=>ft,contrastList:()=>H,createMonotone:()=>z,cssRgbToRgb:()=>gt,findMaxChromaHex:()=>k,fromLightnessEAL:()=>ut,getApcaContrast:()=>L,getMonochromaticContrasts:()=>N,getPaletteContrasts:()=>X,getRelativeLuminance:()=>D,getWcagContrast:()=>R,hexToRgb:()=>f,labToLch:()=>q,labToRgb:()=>lt,lchToLab:()=>bt,lrgbToSrgb:()=>G,rgbToHex:()=>it,rgbToLab:()=>x,rootMeanSquare:()=>y,simulateDeuteranopia:()=>Mt,simulateProtanopia:()=>pt,srgbToLrgb:()=>_,toLightnessEAL:()=>T,unwrapHue:()=>v});var D=r=>{let[t,n,e]=r;return .2126*t+.7152*n+.0722*e},G=r=>{let t=n=>{let e=Math.max(0,Math.min(1,n)),o=e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055;return Math.max(0,Math.min(255,Math.round(o*255)))};return r.map(t)},_=r=>{let t=n=>n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92;return r.map(t)},it=r=>{let[t,n,e]=G(r);return t=t.toString(16).padStart(2,"0"),n=n.toString(16).padStart(2,"0"),e=e.toString(16).padStart(2,"0"),`#${t}${n}${e}`},f=r=>{let t=parseInt(r.slice(1,3),16)/255,n=parseInt(r.slice(3,5),16)/255,e=parseInt(r.slice(5,7),16)/255;return _([t,n,e])},T=r=>{let[t,n,e]=r,o=Math.sqrt(n*n+e*e),s=(Math.atan2(e,n)*180/Math.PI+360)%360,i=.1644,b=.0603,m=.1307,u=.006,h=i*Math.abs(Math.sin((s-90)/2*(Math.PI/180)))+b,a=0;return(s<=90||s>=270)&&(a=m*Math.abs(Math.cos(s*(Math.PI/180)))+u),t+(h+a)*o},ut=(r,t)=>{let[,n,e]=t,o=Math.sqrt(n*n+e*e),s=(Math.atan2(e,n)*180/Math.PI+360)%360,i=.1644,b=.0603,m=.1307,u=.006,h=i*Math.abs(Math.sin((s-90)/2*(Math.PI/180)))+b,a=0;return(s<=90||s>=270)&&(a=m*Math.abs(Math.cos(s*(Math.PI/180)))+u),Math.max(0,r-(h+a)*o)},bt=r=>{let[t,n,e]=r,o=e*Math.PI/180;return[t,n*Math.cos(o),n*Math.sin(o)]},x=r=>{let[t,n,e]=r,o=.4124564*t+.3575761*n+.1804375*e,c=.2126729*t+.7151522*n+.072175*e,s=.0193339*t+.119192*n+.9503041*e,i=.95047,b=1,m=1.08883,u=p=>p>.008856?Math.cbrt(p):7.787*p+16/116,h=u(o/i),a=u(c/b),l=u(s/m);return[116*a-16,500*(h-a),200*(a-l)]},lt=r=>{let[t,n,e]=r,o=(t+16)/116,c=n/500+o,s=o-e/200,i=p=>p**3>.008856?p**3:(p-16/116)/7.787,b=.95047,m=1,u=1.08883,h=i(c)*b,a=i(o)*m,l=i(s)*u;return[3.2404542*h-1.5371385*a-.4985314*l,-.969266*h+1.8760108*a+.041556*l,.0556434*h-.2040259*a+1.0572252*l]},q=r=>{let[t,n,e]=r,o=Math.sqrt(n*n+e*e);if(o<1e-4)return[t,0,0];let s=(Math.atan2(e,n)*180/Math.PI+360)%360;return s>=359.9999&&(s=0),[t,o,s]},A=(r,t)=>{let[n,e,o]=r,[c,s,i]=t,b=(n+c)/2,m=Math.sqrt(e*e+o*o),u=Math.sqrt(s*s+i*i),h=(m+u)/2,a=.5*(1-Math.sqrt(Math.pow(h,7)/(Math.pow(h,7)+Math.pow(25,7)))),l=e*(1+a),p=s*(1+a),M=Math.sqrt(l*l+o*o),d=Math.sqrt(p*p+i*i),S=(M+d)/2,C=Math.atan2(o,l)*180/Math.PI+(Math.atan2(o,l)<0?360:0),g=Math.atan2(i,p)*180/Math.PI+(Math.atan2(i,p)<0?360:0),E=g-C;Math.abs(E)>180&&(E+=g<=C?360:-360);let w=Math.abs(C-g)>180?(C+g+360)/2:(C+g)/2,V=1-.17*Math.cos((w-30)*Math.PI/180)+.24*Math.cos(2*w*Math.PI/180)+.32*Math.cos((3*w+6)*Math.PI/180)-.2*Math.cos((4*w-63)*Math.PI/180),tt=c-n,Y=d-M,B=2*Math.sqrt(M*d)*Math.sin(E/2*Math.PI/180),nt=1+.015*Math.pow(b-50,2)/Math.sqrt(20+Math.pow(b-50,2)),U=1+.045*S,$=1+.015*S*V,rt=30*Math.exp(-Math.pow((w-275)/25,2)),et=-(2*Math.sqrt(Math.pow(S,7)/(Math.pow(S,7)+Math.pow(25,7))))*Math.sin(2*rt*Math.PI/180);return Math.sqrt(Math.pow(tt/nt,2)+Math.pow(Y/U,2)+Math.pow(B/$,2)+et*(Y/U)*(B/$))},k=r=>{let t="",n=-1/0;for(let e of r){let o=x(f(e)),[,c]=q(o);c>n&&(n=c,t=e)}return t};function v(r){let t=[r[0]];for(let n=1;n<r.length;n++){let e=r[n]-r[n-1];e>180?e-=360:e<-180&&(e+=360),t.push(t[n-1]+e)}return t}function pt(r){let[t,n,e]=r;return[.152286*t+1.052583*n-.204868*e,.114503*t+.786281*n+.099216*e,-.003882*t-.048116*n+1.051998*e]}function Mt(r){let[t,n,e]=r;return[.367322*t+.860646*n-.227968*e,.280085*t+.672501*n+.047413*e,-.01182*t+.04294*n+.968881*e]}var gt=r=>{let t=r.match(/\d+(\.\d+)?/g);if(!t||t.length<3)throw new Error("Invalid CSS rgb()");let n=e=>{let o=e/255;return o<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)};return[n(Number(t[0])),n(Number(t[1])),n(Number(t[2]))]};var R=(r,t)=>(Math.max(r,t)+.05)/(Math.min(r,t)+.05),L=(r,t)=>{let n=s=>s>5e-4?s:s+Math.pow(5e-4-s,.8),e=n(r),o=n(t),c=(Math.pow(e,.56)-Math.pow(o,.56))*100;return Math.abs(c)<.1?0:(c=c>0?c<1?0:c-.25:c>-1?0:c+.25,Math.round(c))};function j(r){let t=r.match(/^(wcag|apca)(\d+)$/);if(!t)throw new Error(`Invalid contrast: ${r}`);let n=t[1]==="wcag"?Number(t[2])/10:Number(t[2]);return{system:t[1],target:n}}var N=r=>{let t={},n=r.length,e=n-1;return H.forEach(o=>{let{system:c,target:s}=j(o),i=e,b=0;for(let m=1;m<n;m++){let u=1/0;for(let h=0;h<n-m;h++){let a=c==="wcag"?R(r[h].luminance,r[h+m].luminance):Math.max(Math.abs(L(r[h+m].luminance,r[h].luminance)),Math.abs(L(r[h].luminance,r[h+m].luminance)));a<u&&(u=a)}if(u>=s){i=m,b=u;break}m===e&&(b=u)}t[o]={system:c,efficiency:i/e,target:s,span:i,value:b,name:o}}),t},H=["wcag30","wcag45","wcag70","apca45","apca60","apca75"],X=r=>{let t={};return H.forEach(n=>{var m;let{target:e,system:o}=j(n),c=r.map(u=>u.contrasts[n]),s=((m=r[0])==null?void 0:m.shades.length)||0,i=Math.max(...c.map(u=>(u==null?void 0:u.span)||0)),b=c.reduce((u,h)=>u+((h==null?void 0:h.value)||0),0);t[n]={system:o,target:e,span:i,value:b/(r.length||1),name:n,efficiency:i/(s-1||1)}}),t};var F=r=>{let t=f(r),n=x(t),e=D(t),o=T(n),c=q(n);return{hex:r,rgb:t,lab:n,lch:c,lightness:o,chroma:c[1],hue:c[2],luminance:e,parameter:0,cumDeltaE00:0,cumProtDeltaE00:0,cumDeutDeltaE00:0,wcag:R(e,1),apca:L(e,1)}};var z=r=>{if(r.length<1)return m=>0;let t=[...r].sort((m,u)=>m[0]-u[0]),n=[];for(let m=0;m<t.length;m++)(m===0||t[m][0]!==t[m-1][0])&&n.push(t[m]);let e=n.length;if(e===1)return m=>n[0][1];let o=n.map(m=>m[0]),c=n.map(m=>m[1]),s=[],i=[];for(let m=0;m<e-1;m++)s[m]=o[m+1]-o[m],i[m]=(c[m+1]-c[m])/s[m];let b=new Array(e);b[0]=i[0],b[e-1]=i[e-2];for(let m=1;m<e-1;m++){let u=i[m-1],h=i[m];if(u*h<=0)b[m]=0;else{let a=(1+s[m]/(s[m-1]+s[m]))/3;b[m]=u*h/((1-a)*u+a*h)}}return m=>{if(m<=o[0])return c[0];if(m>=o[e-1])return c[e-1];let u=0,h=e-2,a=0;for(;u<=h;){let g=Math.floor((u+h)/2);if(m>=o[g]&&m<=o[g+1]){a=g;break}m<o[g]?h=g-1:u=g+1}let l=s[a],p=(m-o[a])/l,M=p*p,d=M*p,S=b[a]*l,C=b[a+1]*l;return(2*d-3*M+1)*c[a]+(d-2*M+p)*S+(-2*d+3*M)*c[a+1]+(d-M)*C}};function y(r){let t=r.length;if(t===0)return 0;let n=0;for(let e=0;e<t;e++)n+=r[e]*r[e];return Math.sqrt(n/t)}var ft=r=>{let t=r.length;if(t===0)return{min:0,max:0,avg:0};let n=r[0],e=r[0],o=0;for(let c=0;c<t;c++){let s=r[c];s<n&&(n=s),s>e&&(e=s),o+=s}return{min:n,max:e,avg:o/t}},I=r=>{let t=r.length;if(t===0)return 0;let n=1e-6,e=r.reduce((s,i)=>s*(i+n),1),o=Math.pow(e,1/t),c=Math.max(0,Math.min(1,o));return parseFloat((c*100).toFixed(2))};var O=(r,t,n)=>{t||(t="brand"),n||(n=[...Array(r.length).keys()]);let e=x(f(r[0]))[0],o=x(f(r[r.length-1]))[0];e>o&&r.reverse();let c=r.map(a=>F(a));for(let a=1;a<c.length;a++){let l=A(c[a-1].lab,c[a].lab);c[a].cumDeltaE00=c[a-1].cumDeltaE00+l}let s=k(r.slice(2,-2))||r[Math.floor(r.length/2)],i=r.findIndex(a=>a.toLowerCase()===(s==null?void 0:s.toLowerCase())),b=v(c.map(a=>a.hue).slice(1,-1));for(let a=1;a<c.length-1;a++)c[a].hue=b[a-1];let m=Z(c.map(a=>a.hue).slice(1,-1),c[i].hue),u=N(c),h={lightnessLinearity:W(c.map(a=>a.lightness)),chromaSmoothness:K(c.map(a=>a.chroma)),spacingUniformity:J(c.map(a=>a.cumDeltaE00)),contrastEfficiency:Q(u.wcag45.span,n.length),hueStability:m};return{name:t,colors:r,baseIndex:i,baseColor:s,shades:c,contrasts:u,metrics:h,score:I(Object.values(h))}},xt=r=>{let{stepNames:t,name:n,colors:e}=r,o=Object.values(e)[0],c=x(f(o[0]))[0],s=x(f(o[o.length-1]))[0],i=c>s?"darken":"lighten",b=[],m={};for(let h in e){let a=O(e[h],h,t);b.push(a),m[h]=a.baseColor}let u={contrastEfficiency:y(b.map(h=>h.metrics.contrastEfficiency)),lightnessLinearity:y(b.map(h=>h.metrics.lightnessLinearity)),chromaSmoothness:y(b.map(h=>h.metrics.chromaSmoothness)),hueStability:y(b.map(h=>h.metrics.hueStability)),spacingUniformity:y(b.map(h=>h.metrics.spacingUniformity))};return{name:n,baseColors:m,stepNames:t,direction:i,steps:t.length,colors:e,contrasts:X(b),scales:b,metrics:u,score:I(Object.values(u))}};function W(r){let t=r.length;if(t<2)return 1;let n=0,e=0,o=0,c=0;for(let a=0;a<t;a++)n+=a,e+=r[a],o+=a*r[a],c+=a*a;let s=t*c-n*n;if(Math.abs(s)<1e-10)return 1;let i=(t*o-n*e)/s,b=(e-i*n)/t;if(Math.abs(i*(t-1))<.001)return 1;let u=0,h=0;for(let a=0;a<t;a++){let l=i*a+b,p=r[a]-l;u+=p*p;let M=Math.max(l-Math.min(b,i*(t-1)+b),Math.max(b,i*(t-1)+b)-l);h+=M*M}return Math.max(0,Math.min(1,1-Math.sqrt(u/t)/Math.sqrt(h/t)))}function Z(r,t){let n=r.length;if(n<2)return 1;let e=0,o=0;for(let c=0;c<n;c++){let s=Math.abs(r[c]-t)%360;s>180&&(s=360-s),e+=s*s;let i=c/(n-1)*180;o+=i*i}return Math.max(0,Math.min(1,1-Math.sqrt(e/n)/(Math.sqrt(o/n)||1)))}var K=r=>{let t=r.length;if(t<3)return 1;let n=133.8,e=Math.max(...r);if(e<=.01)return 1;let o=r.map(h=>h/e*n),c=Math.min(...o),s=Math.max(...o),i=o.findIndex(h=>h===s),b=z([[0,o[0]],[i,s],[t-1,o[t-1]]]),m=0,u=0;for(let h=0;h<t;h++){let a=b(h),l=o[h]-a;m+=l*l,u+=Math.pow(Math.max(a-c,s-a),2)}return Math.max(0,Math.min(1,1-Math.sqrt(m/t)/Math.sqrt(u/t)))},J=r=>{let t=r.length;if(t<2)return 1;let n=[];for(let s=1;s<t;s++){let i=r[s]-r[s-1];if(i<0)return 0;n.push(i)}let e=n.reduce((s,i)=>s+i,0)/n.length;if(e<=1e-6)return 0;let o=0;for(let s of n)o+=Math.pow(s-e,2);let c=Math.sqrt(o/n.length)/e;return Math.max(0,Math.min(1,1/(1+c)))},Q=(r,t)=>{if(t<=1)return 1;let n=.5,e=r/t,o=n*((t-1)/t);return e<=o?1:e>=1?0:(1-e)/(1-o)};return ht(dt);})();
