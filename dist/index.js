var k=e=>{let[t,n,r]=e;return .2126*t+.7152*n+.0722*r},Z=e=>{let t=n=>{let r=Math.max(0,Math.min(1,n)),o=r<=.0031308?12.92*r:1.055*Math.pow(r,1/2.4)-.055;return Math.max(0,Math.min(255,Math.round(o*255)))};return e.map(t)},K=e=>{let t=n=>n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92;return e.map(t)},ot=e=>{let[t,n,r]=Z(e);return t=t.toString(16).padStart(2,"0"),n=n.toString(16).padStart(2,"0"),r=r.toString(16).padStart(2,"0"),`#${t}${n}${r}`},x=e=>{let t=parseInt(e.slice(1,3),16)/255,n=parseInt(e.slice(3,5),16)/255,r=parseInt(e.slice(5,7),16)/255;return K([t,n,r])},v=e=>{let[t,n,r]=e,o=Math.sqrt(n*n+r*r),s=(Math.atan2(r,n)*180/Math.PI+360)%360,i=.1644,b=.0603,m=.1307,u=.006,h=i*Math.abs(Math.sin((s-90)/2*(Math.PI/180)))+b,a=0;return(s<=90||s>=270)&&(a=m*Math.abs(Math.cos(s*(Math.PI/180)))+u),t+(h+a)*o},at=(e,t)=>{let[,n,r]=t,o=Math.sqrt(n*n+r*r),s=(Math.atan2(r,n)*180/Math.PI+360)%360,i=.1644,b=.0603,m=.1307,u=.006,h=i*Math.abs(Math.sin((s-90)/2*(Math.PI/180)))+b,a=0;return(s<=90||s>=270)&&(a=m*Math.abs(Math.cos(s*(Math.PI/180)))+u),Math.max(0,e-(h+a)*o)},st=e=>{let[t,n,r]=e,o=r*Math.PI/180;return[t,n*Math.cos(o),n*Math.sin(o)]},d=e=>{let[t,n,r]=e,o=.4124564*t+.3575761*n+.1804375*r,c=.2126729*t+.7151522*n+.072175*r,s=.0193339*t+.119192*n+.9503041*r,i=.95047,b=1,m=1.08883,u=p=>p>.008856?Math.cbrt(p):7.787*p+16/116,h=u(o/i),a=u(c/b),l=u(s/m);return[116*a-16,500*(h-a),200*(a-l)]},ct=e=>{let[t,n,r]=e,o=(t+16)/116,c=n/500+o,s=o-r/200,i=p=>p**3>.008856?p**3:(p-16/116)/7.787,b=.95047,m=1,u=1.08883,h=i(c)*b,a=i(o)*m,l=i(s)*u;return[3.2404542*h-1.5371385*a-.4985314*l,-.969266*h+1.8760108*a+.041556*l,.0556434*h-.2040259*a+1.0572252*l]},R=e=>{let[t,n,r]=e,o=Math.sqrt(n*n+r*r);if(o<1e-4)return[t,0,0];let s=(Math.atan2(r,n)*180/Math.PI+360)%360;return s>=359.9999&&(s=0),[t,o,s]},N=(e,t)=>{let[n,r,o]=e,[c,s,i]=t,b=(n+c)/2,m=Math.sqrt(r*r+o*o),u=Math.sqrt(s*s+i*i),h=(m+u)/2,a=.5*(1-Math.sqrt(Math.pow(h,7)/(Math.pow(h,7)+Math.pow(25,7)))),l=r*(1+a),p=s*(1+a),M=Math.sqrt(l*l+o*o),f=Math.sqrt(p*p+i*i),y=(M+f)/2,C=Math.atan2(o,l)*180/Math.PI+(Math.atan2(o,l)<0?360:0),g=Math.atan2(i,p)*180/Math.PI+(Math.atan2(i,p)<0?360:0),q=g-C;Math.abs(q)>180&&(q+=g<=C?360:-360);let w=Math.abs(C-g)>180?(C+g+360)/2:(C+g)/2,_=1-.17*Math.cos((w-30)*Math.PI/180)+.24*Math.cos(2*w*Math.PI/180)+.32*Math.cos((3*w+6)*Math.PI/180)-.2*Math.cos((4*w-63)*Math.PI/180),j=c-n,P=f-M,D=2*Math.sqrt(M*f)*Math.sin(q/2*Math.PI/180),F=1+.015*Math.pow(b-50,2)/Math.sqrt(20+Math.pow(b-50,2)),T=1+.045*y,A=1+.015*y*_,O=30*Math.exp(-Math.pow((w-275)/25,2)),W=-(2*Math.sqrt(Math.pow(y,7)/(Math.pow(y,7)+Math.pow(25,7))))*Math.sin(2*O*Math.PI/180);return Math.sqrt(Math.pow(j/F,2)+Math.pow(P/T,2)+Math.pow(D/A,2)+W*(P/T)*(D/A))},H=e=>{let t="",n=-1/0;for(let r of e){let o=d(x(r)),[,c]=R(o);c>n&&(n=c,t=r)}return t};function X(e){let t=[e[0]];for(let n=1;n<e.length;n++){let r=e[n]-e[n-1];r>180?r-=360:r<-180&&(r+=360),t.push(t[n-1]+r)}return t}function mt(e){let[t,n,r]=e;return[.152286*t+1.052583*n-.204868*r,.114503*t+.786281*n+.099216*r,-.003882*t-.048116*n+1.051998*r]}function ht(e){let[t,n,r]=e;return[.367322*t+.860646*n-.227968*r,.280085*t+.672501*n+.047413*r,-.01182*t+.04294*n+.968881*r]}var it=e=>{let t=e.match(/\d+(\.\d+)?/g);if(!t||t.length<3)throw new Error("Invalid CSS rgb()");let n=r=>{let o=r/255;return o<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)};return[n(Number(t[0])),n(Number(t[1])),n(Number(t[2]))]};var I=(e,t)=>(Math.max(e,t)+.05)/(Math.min(e,t)+.05),L=(e,t)=>{let n=s=>s>5e-4?s:s+Math.pow(5e-4-s,.8),r=n(e),o=n(t),c=(Math.pow(r,.56)-Math.pow(o,.56))*100;return Math.abs(c)<.1?0:(c=c>0?c<1?0:c-.25:c>-1?0:c+.25,Math.round(c))};function z(e){let t=e.match(/^(wcag|apca)(\d+)$/);if(!t)throw new Error(`Invalid contrast: ${e}`);let n=t[1]==="wcag"?Number(t[2])/10:Number(t[2]);return{system:t[1],target:n}}var Y=e=>{let t={},n=e.length,r=n-1;return B.forEach(o=>{let{system:c,target:s}=z(o),i=r,b=0;for(let m=1;m<n;m++){let u=1/0;for(let h=0;h<n-m;h++){let a=c==="wcag"?I(e[h].luminance,e[h+m].luminance):Math.max(Math.abs(L(e[h+m].luminance,e[h].luminance)),Math.abs(L(e[h].luminance,e[h+m].luminance)));a<u&&(u=a)}if(u>=s){i=m,b=u;break}m===r&&(b=u)}t[o]={system:c,efficiency:i/r,target:s,span:i,value:b,name:o}}),t},B=["wcag30","wcag45","wcag70","apca45","apca60","apca75"],U=e=>{let t={};return B.forEach(n=>{var m;let{target:r,system:o}=z(n),c=e.map(u=>u.contrasts[n]),s=((m=e[0])==null?void 0:m.shades.length)||0,i=Math.max(...c.map(u=>(u==null?void 0:u.span)||0)),b=c.reduce((u,h)=>u+((h==null?void 0:h.value)||0),0);t[n]={system:o,target:r,span:i,value:b/(e.length||1),name:n,efficiency:i/(s-1||1)}}),t};var $=e=>{let t=x(e),n=d(t),r=k(t),o=v(n),c=R(n);return{hex:e,rgb:t,lab:n,lch:c,lightness:o,chroma:c[1],hue:c[2],luminance:r,parameter:0,cumDeltaE00:0,cumProtDeltaE00:0,cumDeutDeltaE00:0,wcag:I(r,1),apca:L(r,1)}};var G=e=>{if(e.length<1)return m=>0;let t=[...e].sort((m,u)=>m[0]-u[0]),n=[];for(let m=0;m<t.length;m++)(m===0||t[m][0]!==t[m-1][0])&&n.push(t[m]);let r=n.length;if(r===1)return m=>n[0][1];let o=n.map(m=>m[0]),c=n.map(m=>m[1]),s=[],i=[];for(let m=0;m<r-1;m++)s[m]=o[m+1]-o[m],i[m]=(c[m+1]-c[m])/s[m];let b=new Array(r);b[0]=i[0],b[r-1]=i[r-2];for(let m=1;m<r-1;m++){let u=i[m-1],h=i[m];if(u*h<=0)b[m]=0;else{let a=(1+s[m]/(s[m-1]+s[m]))/3;b[m]=u*h/((1-a)*u+a*h)}}return m=>{if(m<=o[0])return c[0];if(m>=o[r-1])return c[r-1];let u=0,h=r-2,a=0;for(;u<=h;){let g=Math.floor((u+h)/2);if(m>=o[g]&&m<=o[g+1]){a=g;break}m<o[g]?h=g-1:u=g+1}let l=s[a],p=(m-o[a])/l,M=p*p,f=M*p,y=b[a]*l,C=b[a+1]*l;return(2*f-3*M+1)*c[a]+(f-2*M+p)*y+(-2*f+3*M)*c[a+1]+(f-M)*C}};function S(e){let t=e.length;if(t===0)return 0;let n=0;for(let r=0;r<t;r++)n+=e[r]*e[r];return Math.sqrt(n/t)}var gt=e=>{let t=e.length;if(t===0)return{min:0,max:0,avg:0};let n=e[0],r=e[0],o=0;for(let c=0;c<t;c++){let s=e[c];s<n&&(n=s),s>r&&(r=s),o+=s}return{min:n,max:r,avg:o/t}},E=e=>{let t=e.length;if(t===0)return 0;let n=1e-6,r=e.reduce((s,i)=>s*(i+n),1),o=Math.pow(r,1/t),c=Math.max(0,Math.min(1,o));return parseFloat((c*100).toFixed(2))};var J=(e,t,n)=>{t||(t="brand"),n||(n=[...Array(e.length).keys()]);let r=d(x(e[0]))[0],o=d(x(e[e.length-1]))[0];r>o&&e.reverse();let c=e.map(a=>$(a));for(let a=1;a<c.length;a++){let l=N(c[a-1].lab,c[a].lab);c[a].cumDeltaE00=c[a-1].cumDeltaE00+l}let s=H(e.slice(2,-2))||e[Math.floor(e.length/2)],i=e.findIndex(a=>a.toLowerCase()===(s==null?void 0:s.toLowerCase())),b=X(c.map(a=>a.hue).slice(1,-1));for(let a=1;a<c.length-1;a++)c[a].hue=b[a-1];let m=V(c.map(a=>a.hue).slice(1,-1),c[i].hue),u=Y(c),h={lightnessLinearity:Q(c.map(a=>a.lightness)),chromaSmoothness:tt(c.map(a=>a.chroma)),spacingUniformity:nt(c.map(a=>a.cumDeltaE00)),contrastEfficiency:rt(u.wcag45.span,n.length),hueStability:m};return{name:t,colors:e,baseIndex:i,baseColor:s,shades:c,contrasts:u,metrics:h,score:E(Object.values(h))}},Et=e=>{let{stepNames:t,name:n,colors:r}=e,o=Object.values(r)[0],c=d(x(o[0]))[0],s=d(x(o[o.length-1]))[0],i=c>s?"darken":"lighten",b=[],m={};for(let h in r){let a=J(r[h],h,t);b.push(a),m[h]=a.baseColor}let u={contrastEfficiency:S(b.map(h=>h.metrics.contrastEfficiency)),lightnessLinearity:S(b.map(h=>h.metrics.lightnessLinearity)),chromaSmoothness:S(b.map(h=>h.metrics.chromaSmoothness)),hueStability:S(b.map(h=>h.metrics.hueStability)),spacingUniformity:S(b.map(h=>h.metrics.spacingUniformity))};return{name:n,baseColors:m,stepNames:t,direction:i,steps:t.length,colors:r,contrasts:U(b),scales:b,metrics:u,score:E(Object.values(u))}};function Q(e){let t=e.length;if(t<2)return 1;let n=0,r=0,o=0,c=0;for(let a=0;a<t;a++)n+=a,r+=e[a],o+=a*e[a],c+=a*a;let s=t*c-n*n;if(Math.abs(s)<1e-10)return 1;let i=(t*o-n*r)/s,b=(r-i*n)/t;if(Math.abs(i*(t-1))<.001)return 1;let u=0,h=0;for(let a=0;a<t;a++){let l=i*a+b,p=e[a]-l;u+=p*p;let M=Math.max(l-Math.min(b,i*(t-1)+b),Math.max(b,i*(t-1)+b)-l);h+=M*M}return Math.max(0,Math.min(1,1-Math.sqrt(u/t)/Math.sqrt(h/t)))}function V(e,t){let n=e.length;if(n<2)return 1;let r=0,o=0;for(let c=0;c<n;c++){let s=Math.abs(e[c]-t)%360;s>180&&(s=360-s),r+=s*s;let i=c/(n-1)*180;o+=i*i}return Math.max(0,Math.min(1,1-Math.sqrt(r/n)/(Math.sqrt(o/n)||1)))}var tt=e=>{let t=e.length;if(t<3)return 1;let n=133.8,r=Math.max(...e);if(r<=.01)return 1;let o=e.map(h=>h/r*n),c=Math.min(...o),s=Math.max(...o),i=o.findIndex(h=>h===s),b=G([[0,o[0]],[i,s],[t-1,o[t-1]]]),m=0,u=0;for(let h=0;h<t;h++){let a=b(h),l=o[h]-a;m+=l*l,u+=Math.pow(Math.max(a-c,s-a),2)}return Math.max(0,Math.min(1,1-Math.sqrt(m/t)/Math.sqrt(u/t)))},nt=e=>{let t=e.length;if(t<2)return 1;let n=[];for(let s=1;s<t;s++){let i=e[s]-e[s-1];if(i<0)return 0;n.push(i)}let r=n.reduce((s,i)=>s+i,0)/n.length;if(r<=1e-6)return 0;let o=0;for(let s of n)o+=Math.pow(s-r,2);let c=Math.sqrt(o/n.length)/r;return Math.max(0,Math.min(1,1/(1+c)))},rt=(e,t)=>{if(t<=1)return 1;let n=.5,r=e/t,o=n*((t-1)/t);return r<=o?1:r>=1?0:(1-r)/(1-o)};export{J as analyzeMonochromatic,Et as analyzeMonochromaticPalette,tt as calcChromaSmoothness,rt as calcContrastEfficiency,N as calcDeltaE2000,V as calcHueStability,Q as calcLightnessLinearity,E as calcScore,nt as calcSpacingUniformity,gt as calcStatistics,B as contrastList,G as createMonotone,it as cssRgbToRgb,H as findMaxChromaHex,at as fromLightnessEAL,L as getApcaContrast,Y as getMonochromaticContrasts,U as getPaletteContrasts,k as getRelativeLuminance,I as getWcagContrast,x as hexToRgb,R as labToLch,ct as labToRgb,st as lchToLab,Z as lrgbToSrgb,ot as rgbToHex,d as rgbToLab,S as rootMeanSquare,ht as simulateDeuteranopia,mt as simulateProtanopia,K as srgbToLrgb,v as toLightnessEAL,X as unwrapHue};
