var v=e=>{let[n,t,r]=e;return .2126*n+.7152*t+.0722*r},K=e=>{let n=t=>{let r=Math.max(0,Math.min(1,t)),s=r<=.0031308?12.92*r:1.055*Math.pow(r,1/2.4)-.055;return Math.max(0,Math.min(255,Math.round(s*255)))};return e.map(n)},J=e=>{let n=t=>t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92;return e.map(n)},ot=e=>{let[n,t,r]=K(e);return n=n.toString(16).padStart(2,"0"),t=t.toString(16).padStart(2,"0"),r=r.toString(16).padStart(2,"0"),`#${n}${t}${r}`},x=e=>{let n=parseInt(e.slice(1,3),16)/255,t=parseInt(e.slice(3,5),16)/255,r=parseInt(e.slice(5,7),16)/255;return J([n,t,r])},A=e=>{let[n,t,r]=e,s=Math.sqrt(t*t+r*r),c=(Math.atan2(r,t)*180/Math.PI+360)%360,i=.1644,b=.0603,o=.1307,u=.006,h=i*Math.abs(Math.sin((c-90)/2*(Math.PI/180)))+b,m=0;return(c<=90||c>=270)&&(m=o*Math.abs(Math.cos(c*(Math.PI/180)))+u),n+(h+m)*s},at=(e,n)=>{let[,t,r]=n,s=Math.sqrt(t*t+r*r),c=(Math.atan2(r,t)*180/Math.PI+360)%360,i=.1644,b=.0603,o=.1307,u=.006,h=i*Math.abs(Math.sin((c-90)/2*(Math.PI/180)))+b,m=0;return(c<=90||c>=270)&&(m=o*Math.abs(Math.cos(c*(Math.PI/180)))+u),Math.max(0,e-(h+m)*s)},st=e=>{let[n,t,r]=e,s=r*Math.PI/180;return[n,t*Math.cos(s),t*Math.sin(s)]},d=e=>{let[n,t,r]=e,s=[[1.0479298,.0229469,-.0501922],[.0296278,.9904345,-.0170738],[.0296278,.9904345,-.0170738]],a=.4124564*n+.3575761*t+.1804375*r,c=.2126729*n+.7151522*t+.072175*r,i=.0193339*n+.119192*t+.9503041*r,b=1.0479298*a+.0229469*c-.0501922*i,o=.0296278*a+.9904345*c-.0170738*i,u=-.009243*a+.0150552*c+.7518743*i,h=M=>M>.008856?Math.cbrt(M):7.787*M+16/116,m=h(b/.96422),l=h(o/1),p=h(u/.82521);return[116*l-16,500*(m-l),200*(l-p)]},R=e=>{let[n,t,r]=e,s=Math.sqrt(t*t+r*r);if(s<1e-4)return[n,0,0];let c=(Math.atan2(r,t)*180/Math.PI+360)%360;return c>=359.9999&&(c=0),[n,s,c]},ct=e=>{let[n,t,r]=e,s=(n+16)/116,a=t/500+s,c=s-r/200,i=p=>p>.2068965?p**3:(p-16/116)/7.787,b=i(a)*.96422,o=i(s)*1,u=i(c)*.82521,h=.9555766*b-.0230393*o+.0631636*u,m=-.0282895*b+1.0099416*o+.0210077*u,l=.0122982*b-.020483*o+1.3299098*u;return[3.2404542*h-1.5371385*m-.4985314*l,-.969266*h+1.8760108*m+.041556*l,.0556434*h-.2040259*m+1.0572252*l]},N=(e,n)=>{let[t,r,s]=e,[a,c,i]=n,b=(t+a)/2,o=Math.sqrt(r*r+s*s),u=Math.sqrt(c*c+i*i),h=(o+u)/2,m=.5*(1-Math.sqrt(Math.pow(h,7)/(Math.pow(h,7)+Math.pow(25,7)))),l=r*(1+m),p=c*(1+m),M=Math.sqrt(l*l+s*s),f=Math.sqrt(p*p+i*i),y=(M+f)/2,C=Math.atan2(s,l)*180/Math.PI+(Math.atan2(s,l)<0?360:0),g=Math.atan2(i,p)*180/Math.PI+(Math.atan2(i,p)<0?360:0),q=g-C;Math.abs(q)>180&&(q+=g<=C?360:-360);let w=Math.abs(C-g)>180?(C+g+360)/2:(C+g)/2,Y=1-.17*Math.cos((w-30)*Math.PI/180)+.24*Math.cos(2*w*Math.PI/180)+.32*Math.cos((3*w+6)*Math.PI/180)-.2*Math.cos((4*w-63)*Math.PI/180),_=a-t,P=f-M,D=2*Math.sqrt(M*f)*Math.sin(q/2*Math.PI/180),j=1+.015*Math.pow(b-50,2)/Math.sqrt(20+Math.pow(b-50,2)),T=1+.045*y,k=1+.015*y*Y,F=30*Math.exp(-Math.pow((w-275)/25,2)),W=-(2*Math.sqrt(Math.pow(y,7)/(Math.pow(y,7)+Math.pow(25,7))))*Math.sin(2*F*Math.PI/180);return Math.sqrt(Math.pow(_/j,2)+Math.pow(P/T,2)+Math.pow(D/k,2)+W*(P/T)*(D/k))},H=e=>{let n="",t=-1/0;for(let r of e){let s=d(x(r)),[,a]=R(s);a>t&&(t=a,n=r)}return n};function z(e){let n=[e[0]];for(let t=1;t<e.length;t++){let r=e[t]-e[t-1];r>180?r-=360:r<-180&&(r+=360),n.push(n[t-1]+r)}return n}function mt(e){let[n,t,r]=e;return[.152286*n+1.052583*t-.204868*r,.114503*n+.786281*t+.099216*r,-.003882*n-.048116*t+1.051998*r]}function ht(e){let[n,t,r]=e;return[.367322*n+.860646*t-.227968*r,.280085*n+.672501*t+.047413*r,-.01182*n+.04294*t+.968881*r]}var it=e=>{let n=e.match(/\d+(\.\d+)?/g);if(!n||n.length<3)throw new Error("Invalid CSS rgb()");let t=r=>{let s=r/255;return s<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4)};return[t(Number(n[0])),t(Number(n[1])),t(Number(n[2]))]};var I=(e,n)=>(Math.max(e,n)+.05)/(Math.min(e,n)+.05),L=(e,n)=>{let t=c=>c>5e-4?c:c+Math.pow(5e-4-c,.8),r=t(e),s=t(n),a=(Math.pow(r,.56)-Math.pow(s,.56))*100;return Math.abs(a)<.1?0:(a=a>0?a<1?0:a-.25:a>-1?0:a+.25,Math.round(a))};function B(e){let n=e.match(/^(wcag|apca)(\d+)$/);if(!n)throw new Error(`Invalid contrast: ${e}`);let t=n[1]==="wcag"?Number(n[2])/10:Number(n[2]);return{system:n[1],target:t}}var U=e=>{let n={},t=e.length,r=t-1;return $.forEach(s=>{let{system:a,target:c}=B(s),i=r,b=0;for(let o=1;o<t;o++){let u=1/0;for(let h=0;h<t-o;h++){let m=a==="wcag"?I(e[h].luminance,e[h+o].luminance):Math.max(Math.abs(L(e[h+o].luminance,e[h].luminance)),Math.abs(L(e[h].luminance,e[h+o].luminance)));m<u&&(u=m)}if(u>=c){i=o,b=u;break}o===r&&(b=u)}n[s]={system:a,efficiency:i/r,target:c,span:i,value:b,name:s}}),n},$=["wcag30","wcag45","wcag70","apca45","apca60","apca75"],G=e=>{let n={};return $.forEach(t=>{var o;let{target:r,system:s}=B(t),a=e.map(u=>u.contrasts[t]),c=((o=e[0])==null?void 0:o.shades.length)||0,i=Math.max(...a.map(u=>(u==null?void 0:u.span)||0)),b=a.reduce((u,h)=>u+((h==null?void 0:h.value)||0),0);n[t]={system:s,target:r,span:i,value:b/(e.length||1),name:t,efficiency:i/(c-1||1)}}),n};var O=e=>{let n=x(e),t=d(n),r=v(n),s=A(t),a=R(t);return{hex:e,rgb:n,lab:t,lch:a,lightness:s,chroma:a[1],hue:a[2],luminance:r,parameter:0,cumDeltaE00:0,cumProtDeltaE00:0,cumDeutDeltaE00:0,wcag:I(r,1),apca:L(r,1)}};var X=e=>{if(e.length<1)return o=>0;let n=[...e].sort((o,u)=>o[0]-u[0]),t=[];for(let o=0;o<n.length;o++)(o===0||n[o][0]!==n[o-1][0])&&t.push(n[o]);let r=t.length;if(r===1)return o=>t[0][1];let s=t.map(o=>o[0]),a=t.map(o=>o[1]),c=[],i=[];for(let o=0;o<r-1;o++)c[o]=s[o+1]-s[o],i[o]=(a[o+1]-a[o])/c[o];let b=new Array(r);b[0]=i[0],b[r-1]=i[r-2];for(let o=1;o<r-1;o++){let u=i[o-1],h=i[o];if(u*h<=0)b[o]=0;else{let m=(1+c[o]/(c[o-1]+c[o]))/3;b[o]=u*h/((1-m)*u+m*h)}}return o=>{if(o<=s[0])return a[0];if(o>=s[r-1])return a[r-1];let u=0,h=r-2,m=0;for(;u<=h;){let g=Math.floor((u+h)/2);if(o>=s[g]&&o<=s[g+1]){m=g;break}o<s[g]?h=g-1:u=g+1}let l=c[m],p=(o-s[m])/l,M=p*p,f=M*p,y=b[m]*l,C=b[m+1]*l;return(2*f-3*M+1)*a[m]+(f-2*M+p)*y+(-2*f+3*M)*a[m+1]+(f-M)*C}};function S(e){let n=e.length;if(n===0)return 0;let t=0;for(let r=0;r<n;r++)t+=e[r]*e[r];return Math.sqrt(t/n)}var gt=e=>{let n=e.length;if(n===0)return{min:0,max:0,avg:0};let t=e[0],r=e[0],s=0;for(let a=0;a<n;a++){let c=e[a];c<t&&(t=c),c>r&&(r=c),s+=c}return{min:t,max:r,avg:s/n}},E=e=>{let n=e.length;if(n===0)return 0;let t=1e-6,r=e.reduce((c,i)=>c*(i+t),1),s=Math.pow(r,1/n),a=Math.max(0,Math.min(1,s));return parseFloat((a*100).toFixed(2))};var Q=(e,n,t)=>{n||(n="brand"),t||(t=[...Array(e.length).keys()]);let r=d(x(e[0]))[0],s=d(x(e[e.length-1]))[0];r>s&&e.reverse();let a=e.map(m=>O(m));for(let m=1;m<a.length;m++){let l=N(a[m-1].lab,a[m].lab);a[m].cumDeltaE00=a[m-1].cumDeltaE00+l}let c=H(e.slice(2,-2))||e[Math.floor(e.length/2)],i=e.findIndex(m=>m.toLowerCase()===(c==null?void 0:c.toLowerCase())),b=z(a.map(m=>m.hue).slice(1,-1));for(let m=1;m<a.length-1;m++)a[m].hue=b[m-1];let o=Z(a.map(m=>m.hue).slice(1,-1),a[i].hue),u=U(a),h={lightnessLinearity:V(a.map(m=>m.lightness)),chromaSmoothness:tt(a.map(m=>m.chroma)),spacingUniformity:nt(a.map(m=>m.cumDeltaE00)),contrastEfficiency:rt(u.wcag45.span,t.length),hueStability:o};return{name:n,colors:e,baseIndex:i,baseColor:c,shades:a,contrasts:u,metrics:h,score:E(Object.values(h))}},Et=e=>{let{stepNames:n,name:t,colors:r}=e,s=Object.values(r)[0],a=d(x(s[0]))[0],c=d(x(s[s.length-1]))[0],i=a>c?"darken":"lighten",b=[],o={};for(let h in r){let m=Q(r[h],h,n);b.push(m),o[h]=m.baseColor}let u={contrastEfficiency:S(b.map(h=>h.metrics.contrastEfficiency)),lightnessLinearity:S(b.map(h=>h.metrics.lightnessLinearity)),chromaSmoothness:S(b.map(h=>h.metrics.chromaSmoothness)),hueStability:S(b.map(h=>h.metrics.hueStability)),spacingUniformity:S(b.map(h=>h.metrics.spacingUniformity))};return{name:t,baseColors:o,stepNames:n,direction:i,steps:n.length,colors:r,contrasts:G(b),scales:b,metrics:u,score:E(Object.values(u))}};function V(e){let n=e.length;if(n<2)return 1;let t=0,r=0,s=0,a=0;for(let m=0;m<n;m++)t+=m,r+=e[m],s+=m*e[m],a+=m*m;let c=n*a-t*t;if(Math.abs(c)<1e-10)return 1;let i=(n*s-t*r)/c,b=(r-i*t)/n;if(Math.abs(i*(n-1))<.001)return 1;let u=0,h=0;for(let m=0;m<n;m++){let l=i*m+b,p=e[m]-l;u+=p*p;let M=Math.max(l-Math.min(b,i*(n-1)+b),Math.max(b,i*(n-1)+b)-l);h+=M*M}return Math.max(0,Math.min(1,1-Math.sqrt(u/n)/Math.sqrt(h/n)))}function Z(e,n){let t=e.length;if(t<2)return 1;let r=0,s=0;for(let a=0;a<t;a++){let c=Math.abs(e[a]-n)%360;c>180&&(c=360-c),r+=c*c;let i=a/(t-1)*180;s+=i*i}return Math.max(0,Math.min(1,1-Math.sqrt(r/t)/(Math.sqrt(s/t)||1)))}var tt=e=>{let n=e.length;if(n<3)return 1;let t=e.map(o=>o*133.8),r=Math.min(...t),s=Math.max(...t),a=t.findIndex(o=>o===s),c=X([[0,t[0]],[a,s],[n-1,t[n-1]]]),i=0,b=0;for(let o=0;o<n;o++){let u=c(o),h=t[o]-u;i+=h*h,b+=Math.pow(Math.max(u-r,s-u),2)}return Math.max(0,Math.min(1,1-Math.sqrt(i/n)/Math.sqrt(b/n)))},nt=e=>{let n=e.length;if(n<2)return 1;let t=[];for(let c=1;c<n;c++){let i=e[c]-e[c-1];if(i<0)return 0;t.push(i)}let r=t.reduce((c,i)=>c+i,0)/t.length;if(r<=1e-6)return 0;let s=0;for(let c of t)s+=Math.pow(c-r,2);let a=Math.sqrt(s/t.length)/r;return Math.max(0,Math.min(1,1/(1+a)))},rt=(e,n)=>{if(n<=1)return 1;let t=.489,r=e/n,s=t*((n-1)/n);return r<=s?1:r>=1?0:(1-r)/(1-s)};export{Q as analyzeMonochromatic,Et as analyzeMonochromaticPalette,tt as calcChromaSmoothness,rt as calcContrastEfficiency,N as calcDeltaE2000,Z as calcHueStability,V as calcLightnessLinearity,E as calcScore,nt as calcSpacingUniformity,gt as calcStatistics,$ as contrastList,X as createMonotone,it as cssRgbToRgb,H as findMaxChromaHex,at as fromLightnessEAL,L as getApcaContrast,U as getMonochromaticContrasts,G as getPaletteContrasts,v as getRelativeLuminance,I as getWcagContrast,x as hexToRgb,R as labToLch,ct as labToRgb,st as lchToLab,K as lrgbToSrgb,ot as rgbToHex,d as rgbToLab,S as rootMeanSquare,ht as simulateDeuteranopia,mt as simulateProtanopia,J as srgbToLrgb,A as toLightnessEAL,z as unwrapHue};
