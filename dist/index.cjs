"use strict";var P=Object.defineProperty;var ot=Object.getOwnPropertyDescriptor;var at=Object.getOwnPropertyNames;var st=Object.prototype.hasOwnProperty;var ct=(r,t)=>{for(var n in t)P(r,n,{get:t[n],enumerable:!0})},mt=(r,t,n,e)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of at(t))!st.call(r,o)&&o!==n&&P(r,o,{get:()=>t[o],enumerable:!(e=ot(t,o))||e.enumerable});return r};var ht=r=>mt(P({},"__esModule",{value:!0}),r);var dt={};ct(dt,{analyzeMonochromatic:()=>F,analyzeMonochromaticPalette:()=>xt,calcChromaSmoothness:()=>J,calcContrastEfficiency:()=>V,calcDeltaE2000:()=>k,calcHueStability:()=>K,calcLightnessLinearity:()=>W,calcScore:()=>I,calcSpacingUniformity:()=>Q,calcStatistics:()=>ft,contrastList:()=>H,createMonotone:()=>B,cssRgbToRgb:()=>gt,findMaxChromaHex:()=>v,fromLightnessEAL:()=>ut,getApcaContrast:()=>L,getMonochromaticContrasts:()=>N,getPaletteContrasts:()=>z,getRelativeLuminance:()=>D,getWcagContrast:()=>R,hexToRgb:()=>f,labToLch:()=>q,labToRgb:()=>lt,lchToLab:()=>bt,lrgbToSrgb:()=>X,rgbToHex:()=>it,rgbToLab:()=>x,rootMeanSquare:()=>y,simulateDeuteranopia:()=>Mt,simulateProtanopia:()=>pt,srgbToLrgb:()=>Y,toLightnessEAL:()=>T,unwrapHue:()=>A});module.exports=ht(dt);var D=r=>{let[t,n,e]=r;return .2126*t+.7152*n+.0722*e},X=r=>{let t=n=>{let e=Math.max(0,Math.min(1,n)),o=e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055;return Math.max(0,Math.min(255,Math.round(o*255)))};return r.map(t)},Y=r=>{let t=n=>n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92;return r.map(t)},it=r=>{let[t,n,e]=X(r);return t=t.toString(16).padStart(2,"0"),n=n.toString(16).padStart(2,"0"),e=e.toString(16).padStart(2,"0"),`#${t}${n}${e}`},f=r=>{let t=parseInt(r.slice(1,3),16)/255,n=parseInt(r.slice(3,5),16)/255,e=parseInt(r.slice(5,7),16)/255;return Y([t,n,e])},T=r=>{let[t,n,e]=r,o=Math.sqrt(n*n+e*e),c=(Math.atan2(e,n)*180/Math.PI+360)%360,i=.1644,b=.0603,a=.1307,u=.006,h=i*Math.abs(Math.sin((c-90)/2*(Math.PI/180)))+b,m=0;return(c<=90||c>=270)&&(m=a*Math.abs(Math.cos(c*(Math.PI/180)))+u),t+(h+m)*o},ut=(r,t)=>{let[,n,e]=t,o=Math.sqrt(n*n+e*e),c=(Math.atan2(e,n)*180/Math.PI+360)%360,i=.1644,b=.0603,a=.1307,u=.006,h=i*Math.abs(Math.sin((c-90)/2*(Math.PI/180)))+b,m=0;return(c<=90||c>=270)&&(m=a*Math.abs(Math.cos(c*(Math.PI/180)))+u),Math.max(0,r-(h+m)*o)},bt=r=>{let[t,n,e]=r,o=e*Math.PI/180;return[t,n*Math.cos(o),n*Math.sin(o)]},x=r=>{let[t,n,e]=r,o=[[1.0479298,.0229469,-.0501922],[.0296278,.9904345,-.0170738],[.0296278,.9904345,-.0170738]],s=.4124564*t+.3575761*n+.1804375*e,c=.2126729*t+.7151522*n+.072175*e,i=.0193339*t+.119192*n+.9503041*e,b=1.0479298*s+.0229469*c-.0501922*i,a=.0296278*s+.9904345*c-.0170738*i,u=-.009243*s+.0150552*c+.7518743*i,h=M=>M>.008856?Math.cbrt(M):7.787*M+16/116,m=h(b/.96422),l=h(a/1),p=h(u/.82521);return[116*l-16,500*(m-l),200*(l-p)]},q=r=>{let[t,n,e]=r,o=Math.sqrt(n*n+e*e);if(o<1e-4)return[t,0,0];let c=(Math.atan2(e,n)*180/Math.PI+360)%360;return c>=359.9999&&(c=0),[t,o,c]},lt=r=>{let[t,n,e]=r,o=(t+16)/116,s=n/500+o,c=o-e/200,i=p=>p>.2068965?p**3:(p-16/116)/7.787,b=i(s)*.96422,a=i(o)*1,u=i(c)*.82521,h=.9555766*b-.0230393*a+.0631636*u,m=-.0282895*b+1.0099416*a+.0210077*u,l=.0122982*b-.020483*a+1.3299098*u;return[3.2404542*h-1.5371385*m-.4985314*l,-.969266*h+1.8760108*m+.041556*l,.0556434*h-.2040259*m+1.0572252*l]},k=(r,t)=>{let[n,e,o]=r,[s,c,i]=t,b=(n+s)/2,a=Math.sqrt(e*e+o*o),u=Math.sqrt(c*c+i*i),h=(a+u)/2,m=.5*(1-Math.sqrt(Math.pow(h,7)/(Math.pow(h,7)+Math.pow(25,7)))),l=e*(1+m),p=c*(1+m),M=Math.sqrt(l*l+o*o),d=Math.sqrt(p*p+i*i),S=(M+d)/2,C=Math.atan2(o,l)*180/Math.PI+(Math.atan2(o,l)<0?360:0),g=Math.atan2(i,p)*180/Math.PI+(Math.atan2(i,p)<0?360:0),E=g-C;Math.abs(E)>180&&(E+=g<=C?360:-360);let w=Math.abs(C-g)>180?(C+g+360)/2:(C+g)/2,Z=1-.17*Math.cos((w-30)*Math.PI/180)+.24*Math.cos(2*w*Math.PI/180)+.32*Math.cos((3*w+6)*Math.PI/180)-.2*Math.cos((4*w-63)*Math.PI/180),tt=s-n,U=d-M,$=2*Math.sqrt(M*d)*Math.sin(E/2*Math.PI/180),nt=1+.015*Math.pow(b-50,2)/Math.sqrt(20+Math.pow(b-50,2)),G=1+.045*S,O=1+.015*S*Z,rt=30*Math.exp(-Math.pow((w-275)/25,2)),et=-(2*Math.sqrt(Math.pow(S,7)/(Math.pow(S,7)+Math.pow(25,7))))*Math.sin(2*rt*Math.PI/180);return Math.sqrt(Math.pow(tt/nt,2)+Math.pow(U/G,2)+Math.pow($/O,2)+et*(U/G)*($/O))},v=r=>{let t="",n=-1/0;for(let e of r){let o=x(f(e)),[,s]=q(o);s>n&&(n=s,t=e)}return t};function A(r){let t=[r[0]];for(let n=1;n<r.length;n++){let e=r[n]-r[n-1];e>180?e-=360:e<-180&&(e+=360),t.push(t[n-1]+e)}return t}function pt(r){let[t,n,e]=r;return[.152286*t+1.052583*n-.204868*e,.114503*t+.786281*n+.099216*e,-.003882*t-.048116*n+1.051998*e]}function Mt(r){let[t,n,e]=r;return[.367322*t+.860646*n-.227968*e,.280085*t+.672501*n+.047413*e,-.01182*t+.04294*n+.968881*e]}var gt=r=>{let t=r.match(/\d+(\.\d+)?/g);if(!t||t.length<3)throw new Error("Invalid CSS rgb()");let n=e=>{let o=e/255;return o<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)};return[n(Number(t[0])),n(Number(t[1])),n(Number(t[2]))]};var R=(r,t)=>(Math.max(r,t)+.05)/(Math.min(r,t)+.05),L=(r,t)=>{let n=c=>c>5e-4?c:c+Math.pow(5e-4-c,.8),e=n(r),o=n(t),s=(Math.pow(e,.56)-Math.pow(o,.56))*100;return Math.abs(s)<.1?0:(s=s>0?s<1?0:s-.25:s>-1?0:s+.25,Math.round(s))};function _(r){let t=r.match(/^(wcag|apca)(\d+)$/);if(!t)throw new Error(`Invalid contrast: ${r}`);let n=t[1]==="wcag"?Number(t[2])/10:Number(t[2]);return{system:t[1],target:n}}var N=r=>{let t={},n=r.length,e=n-1;return H.forEach(o=>{let{system:s,target:c}=_(o),i=e,b=0;for(let a=1;a<n;a++){let u=1/0;for(let h=0;h<n-a;h++){let m=s==="wcag"?R(r[h].luminance,r[h+a].luminance):Math.max(Math.abs(L(r[h+a].luminance,r[h].luminance)),Math.abs(L(r[h].luminance,r[h+a].luminance)));m<u&&(u=m)}if(u>=c){i=a,b=u;break}a===e&&(b=u)}t[o]={system:s,efficiency:i/e,target:c,span:i,value:b,name:o}}),t},H=["wcag30","wcag45","wcag70","apca45","apca60","apca75"],z=r=>{let t={};return H.forEach(n=>{var a;let{target:e,system:o}=_(n),s=r.map(u=>u.contrasts[n]),c=((a=r[0])==null?void 0:a.shades.length)||0,i=Math.max(...s.map(u=>(u==null?void 0:u.span)||0)),b=s.reduce((u,h)=>u+((h==null?void 0:h.value)||0),0);t[n]={system:o,target:e,span:i,value:b/(r.length||1),name:n,efficiency:i/(c-1||1)}}),t};var j=r=>{let t=f(r),n=x(t),e=D(t),o=T(n),s=q(n);return{hex:r,rgb:t,lab:n,lch:s,lightness:o,chroma:s[1],hue:s[2],luminance:e,parameter:0,cumDeltaE00:0,cumProtDeltaE00:0,cumDeutDeltaE00:0,wcag:R(e,1),apca:L(e,1)}};var B=r=>{if(r.length<1)return a=>0;let t=[...r].sort((a,u)=>a[0]-u[0]),n=[];for(let a=0;a<t.length;a++)(a===0||t[a][0]!==t[a-1][0])&&n.push(t[a]);let e=n.length;if(e===1)return a=>n[0][1];let o=n.map(a=>a[0]),s=n.map(a=>a[1]),c=[],i=[];for(let a=0;a<e-1;a++)c[a]=o[a+1]-o[a],i[a]=(s[a+1]-s[a])/c[a];let b=new Array(e);b[0]=i[0],b[e-1]=i[e-2];for(let a=1;a<e-1;a++){let u=i[a-1],h=i[a];if(u*h<=0)b[a]=0;else{let m=(1+c[a]/(c[a-1]+c[a]))/3;b[a]=u*h/((1-m)*u+m*h)}}return a=>{if(a<=o[0])return s[0];if(a>=o[e-1])return s[e-1];let u=0,h=e-2,m=0;for(;u<=h;){let g=Math.floor((u+h)/2);if(a>=o[g]&&a<=o[g+1]){m=g;break}a<o[g]?h=g-1:u=g+1}let l=c[m],p=(a-o[m])/l,M=p*p,d=M*p,S=b[m]*l,C=b[m+1]*l;return(2*d-3*M+1)*s[m]+(d-2*M+p)*S+(-2*d+3*M)*s[m+1]+(d-M)*C}};function y(r){let t=r.length;if(t===0)return 0;let n=0;for(let e=0;e<t;e++)n+=r[e]*r[e];return Math.sqrt(n/t)}var ft=r=>{let t=r.length;if(t===0)return{min:0,max:0,avg:0};let n=r[0],e=r[0],o=0;for(let s=0;s<t;s++){let c=r[s];c<n&&(n=c),c>e&&(e=c),o+=c}return{min:n,max:e,avg:o/t}},I=r=>{let t=r.length;if(t===0)return 0;let n=1e-6,e=r.reduce((c,i)=>c*(i+n),1),o=Math.pow(e,1/t),s=Math.max(0,Math.min(1,o));return parseFloat((s*100).toFixed(2))};var F=(r,t,n)=>{t||(t="brand"),n||(n=[...Array(r.length).keys()]);let e=x(f(r[0]))[0],o=x(f(r[r.length-1]))[0];e>o&&r.reverse();let s=r.map(m=>j(m));for(let m=1;m<s.length;m++){let l=k(s[m-1].lab,s[m].lab);s[m].cumDeltaE00=s[m-1].cumDeltaE00+l}let c=v(r.slice(2,-2))||r[Math.floor(r.length/2)],i=r.findIndex(m=>m.toLowerCase()===(c==null?void 0:c.toLowerCase())),b=A(s.map(m=>m.hue).slice(1,-1));for(let m=1;m<s.length-1;m++)s[m].hue=b[m-1];let a=K(s.map(m=>m.hue).slice(1,-1),s[i].hue),u=N(s),h={lightnessLinearity:W(s.map(m=>m.lightness)),chromaSmoothness:J(s.map(m=>m.chroma)),spacingUniformity:Q(s.map(m=>m.cumDeltaE00)),contrastEfficiency:V(u.wcag45.span,n.length),hueStability:a};return{name:t,colors:r,baseIndex:i,baseColor:c,shades:s,contrasts:u,metrics:h,score:I(Object.values(h))}},xt=r=>{let{stepNames:t,name:n,colors:e}=r,o=Object.values(e)[0],s=x(f(o[0]))[0],c=x(f(o[o.length-1]))[0],i=s>c?"darken":"lighten",b=[],a={};for(let h in e){let m=F(e[h],h,t);b.push(m),a[h]=m.baseColor}let u={contrastEfficiency:y(b.map(h=>h.metrics.contrastEfficiency)),lightnessLinearity:y(b.map(h=>h.metrics.lightnessLinearity)),chromaSmoothness:y(b.map(h=>h.metrics.chromaSmoothness)),hueStability:y(b.map(h=>h.metrics.hueStability)),spacingUniformity:y(b.map(h=>h.metrics.spacingUniformity))};return{name:n,baseColors:a,stepNames:t,direction:i,steps:t.length,colors:e,contrasts:z(b),scales:b,metrics:u,score:I(Object.values(u))}};function W(r){let t=r.length;if(t<2)return 1;let n=0,e=0,o=0,s=0;for(let m=0;m<t;m++)n+=m,e+=r[m],o+=m*r[m],s+=m*m;let c=t*s-n*n;if(Math.abs(c)<1e-10)return 1;let i=(t*o-n*e)/c,b=(e-i*n)/t;if(Math.abs(i*(t-1))<.001)return 1;let u=0,h=0;for(let m=0;m<t;m++){let l=i*m+b,p=r[m]-l;u+=p*p;let M=Math.max(l-Math.min(b,i*(t-1)+b),Math.max(b,i*(t-1)+b)-l);h+=M*M}return Math.max(0,Math.min(1,1-Math.sqrt(u/t)/Math.sqrt(h/t)))}function K(r,t){let n=r.length;if(n<2)return 1;let e=0,o=0;for(let s=0;s<n;s++){let c=Math.abs(r[s]-t)%360;c>180&&(c=360-c),e+=c*c;let i=s/(n-1)*180;o+=i*i}return Math.max(0,Math.min(1,1-Math.sqrt(e/n)/(Math.sqrt(o/n)||1)))}var J=r=>{let t=r.length;if(t<3)return 1;let n=r.map(a=>a*133.8),e=Math.min(...n),o=Math.max(...n),s=n.findIndex(a=>a===o),c=B([[0,n[0]],[s,o],[t-1,n[t-1]]]),i=0,b=0;for(let a=0;a<t;a++){let u=c(a),h=n[a]-u;i+=h*h,b+=Math.pow(Math.max(u-e,o-u),2)}return Math.max(0,Math.min(1,1-Math.sqrt(i/t)/Math.sqrt(b/t)))},Q=r=>{let t=r.length;if(t<2)return 1;let n=[];for(let c=1;c<t;c++){let i=r[c]-r[c-1];if(i<0)return 0;n.push(i)}let e=n.reduce((c,i)=>c+i,0)/n.length;if(e<=1e-6)return 0;let o=0;for(let c of n)o+=Math.pow(c-e,2);let s=Math.sqrt(o/n.length)/e;return Math.max(0,Math.min(1,1/(1+s)))},V=(r,t)=>{if(t<=1)return 1;let n=.489,e=r/t,o=n*((t-1)/t);return e<=o?1:e>=1?0:(1-e)/(1-o)};0&&(module.exports={analyzeMonochromatic,analyzeMonochromaticPalette,calcChromaSmoothness,calcContrastEfficiency,calcDeltaE2000,calcHueStability,calcLightnessLinearity,calcScore,calcSpacingUniformity,calcStatistics,contrastList,createMonotone,cssRgbToRgb,findMaxChromaHex,fromLightnessEAL,getApcaContrast,getMonochromaticContrasts,getPaletteContrasts,getRelativeLuminance,getWcagContrast,hexToRgb,labToLch,labToRgb,lchToLab,lrgbToSrgb,rgbToHex,rgbToLab,rootMeanSquare,simulateDeuteranopia,simulateProtanopia,srgbToLrgb,toLightnessEAL,unwrapHue});
